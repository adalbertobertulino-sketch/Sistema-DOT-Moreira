<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Frequência - Sistema DOT</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

  <header class="topbar">
    <div class="brand">Sistema DOT Moreira</div>
    <nav class="menu">
      <a href="./dashboard.html">Painel</a>
      <a href="./alunos.html">Alunos</a>
      <a class="active" href="./frequencia.html">Frequência</a>
      <a href="./avisos.html">Avisos</a>
      <a href="./pais.html">Pais</a>
      <a href="./admin.html">Admin</a>
    </nav>
    <button id="btnSair" class="btn">Sair</button>
  </header>

  <main class="container">

    <section class="card">
      <h1>Lançamento / Edição de Frequência</h1>
      <p class="muted">
        Se já existir frequência salva para a data, o sistema vai preencher automaticamente.
        <br/>Somente <b>DOT/Admin</b> podem editar e justificar falta.
      </p>

      <div id="status" class="msg info">Carregando...</div>

      <div class="grid" style="grid-template-columns: repeat(4, 1fr);">
        <div>
          <label>Turma</label>
          <select id="turmaSelect">
            <option value="">Carregando...</option>
          </select>
        </div>

        <div>
          <label>Data (pode ser anterior)</label>
          <input id="dataInput" type="date" />
          <div class="muted" style="margin-top:6px;">
            Dica: você pode digitar a data no formato AAAA-MM-DD.
          </div>
        </div>

        <div>
          <label>Mostrar alunos</label>
          <select id="filtroSituacao">
            <option value="ativo" selected>Somente Ativos</option>
            <option value="">Todos</option>
            <option value="desistente">Somente Desistentes</option>
            <option value="evadido">Somente Evadidos</option>
          </select>
        </div>

        <div>
          <label>Buscar (nome)</label>
          <input id="buscaInput" type="text" placeholder="Digite parte do nome..." />
        </div>
      </div>

      <div class="actions">
        <button id="btnOntem" class="btn">Ontem</button>
        <button id="btnHoje" class="btn">Hoje</button>
        <button id="btnCarregar" class="btn">Carregar alunos</button>
        <button id="btnSalvarTudo" class="btn primary">Salvar tudo</button>
      </div>

      <p class="muted" id="subtitulo" style="margin-top:10px;">—</p>
      <p class="muted" id="permissoes" style="margin-top:6px;">—</p>
    </section>

    <section class="card">
      <h2>Lista</h2>

      <div class="tableWrap">
        <table class="table">
          <thead>
            <tr>
              <th>Aluno</th>
              <th>Turma</th>
              <th>Matrícula</th>
              <th>Situação</th>
              <th>Presente</th>
              <th>Faltas no dia (0-10)</th>
              <th>Justificativa</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="lista">
            <tr><td colspan="8" class="muted">Selecione a turma e clique em “Carregar alunos”.</td></tr>
          </tbody>
        </table>
      </div>

      <p class="muted" style="margin-top:10px;">
        Se “Presente” estiver marcado, faltas ficam 0 automaticamente.
        <br/>Justificativa só aparece para DOT/Admin e só quando houver falta.
      </p>
    </section>

  </main>

  <script type="module" src="./frequencia.js"></script>
</body>
</html>
